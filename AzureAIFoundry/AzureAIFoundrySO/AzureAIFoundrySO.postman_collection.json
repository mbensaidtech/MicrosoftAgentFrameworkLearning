{
	"info": {
		"_postman_id": "azure-ai-foundry-so",
		"name": "Azure AI Foundry SO (Structured Output)",
		"description": "Postman collection for testing Azure AI Foundry SO API with structured output. This collection includes RESTful endpoints for managing agents and threads (conversations) with book recommendations. The API returns structured output in StructuredAgentResponse<T> format with structuredOutput as a JSON string.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Agents",
			"item": [
				{
					"name": "Create BookRecommendationAgent",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/agents",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"agents"
							]
						},
						"description": "Creates a new BookRecommendationAgent. This endpoint always creates a BookRecommendationAgent that returns structured book recommendations. No request body is required. The response will include the agentId."
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/api/agents",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"agents"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"agentId\": \"asst_xyz789\"\n}"
						}
					]
				}
			],
			"description": "Endpoint for creating BookRecommendationAgent. POST /api/agents creates a new BookRecommendationAgent that returns structured book recommendations. No request body required."
		},
		{
			"name": "Threads",
			"item": [
				{
					"name": "Create Thread and Get Book Recommendations",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"agentId\": \"{{agentId}}\",\n  \"message\": \"Recommend me some science fiction books\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/threads",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"threads"
							]
						},
						"description": "Creates a new conversation (thread) for a BookRecommendationAgent and sends the first message. The response will include structured book recommendations in StructuredAgentResponse<BookRecommendationResponse> format with structuredOutput as a JSON string.\n\nRequest body:\n- agentId (required): The ID of the BookRecommendationAgent to use\n- message (required): The message requesting book recommendations\n\nExample messages:\n- \"Recommend me some science fiction books\"\n- \"I'm looking for mystery novels with strong female protagonists\"\n- \"What are the best fantasy books published in 2023?\""
					},
					"response": [
						{
							"name": "Success Response with Book Recommendations",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"agentId\": \"{{agentId}}\",\n  \"message\": \"Recommend me some science fiction books\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/api/threads",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"threads"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"agentId\": \"asst_xyz789\",\n  \"threadId\": \"thread_abc123\",\n  \"createdAt\": \"2025-01-13T14:00:00Z\",\n  \"messages\": [\n    {\n      \"authorName\": \"asst_xyz789\",\n      \"createdAt\": \"2025-01-13T14:00:00Z\",\n      \"role\": \"Assistant\",\n      \"messageId\": \"run_abc123\",\n      \"structuredOutput\": \"{\\\"recommendations\\\":[{\\\"title\\\":\\\"Dune\\\",\\\"author\\\":\\\"Frank Herbert\\\",\\\"genre\\\":\\\"Science Fiction\\\",\\\"description\\\":\\\"A classic epic science fiction novel set on the desert planet Arrakis.\\\",\\\"rating\\\":4.8,\\\"publicationDate\\\":\\\"1965-08-01\\\",\\\"isbn\\\":\\\"978-0441013593\\\",\\\"pageCount\\\":688,\\\"whyRecommended\\\":\\\"This is a foundational work of science fiction that explores themes of politics, religion, and ecology.\\\",\\\"similarBooks\\\":[\\\"Foundation\\\",\\\"The Left Hand of Darkness\\\",\\\"Hyperion\\\"]},{\\\"title\\\":\\\"The Three-Body Problem\\\",\\\"author\\\":\\\"Liu Cixin\\\",\\\"genre\\\":\\\"Science Fiction\\\",\\\"description\\\":\\\"A hard science fiction novel about humanity's first contact with an alien civilization.\\\",\\\"rating\\\":4.6,\\\"publicationDate\\\":\\\"2008-01-01\\\",\\\"isbn\\\":\\\"978-0765377067\\\",\\\"pageCount\\\":400,\\\"whyRecommended\\\":\\\"Award-winning novel that combines hard science with compelling storytelling.\\\",\\\"similarBooks\\\":[\\\"Blindsight\\\",\\\"Children of Time\\\",\\\"Project Hail Mary\\\"]},{\\\"title\\\":\\\"Project Hail Mary\\\",\\\"author\\\":\\\"Andy Weir\\\",\\\"genre\\\":\\\"Science Fiction\\\",\\\"description\\\":\\\"A lone astronaut must save humanity from an extinction-level event.\\\",\\\"rating\\\":4.7,\\\"publicationDate\\\":\\\"2021-05-04\\\",\\\"isbn\\\":\\\"978-0593135204\\\",\\\"pageCount\\\":496,\\\"whyRecommended\\\":\\\"Engaging and scientifically accurate with a great sense of humor.\\\",\\\"similarBooks\\\":[\\\"The Martian\\\",\\\"Artemis\\\",\\\"The Three-Body Problem\\\"]}],\\\"totalCount\\\":3,\\\"notes\\\":\\\"These are highly regarded science fiction novels that span different subgenres and time periods.\\\"}\"\n    }\n  ],\n  \"usage\": {\n    \"inputTokenCount\": 45,\n    \"outputTokenCount\": 850,\n    \"totalTokenCount\": 895\n  }\n}"
						}
					]
				},
				{
					"name": "Add Message to Thread (Continue Conversation)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"agentId\": \"{{agentId}}\",\n  \"message\": \"Tell me more about the first book you recommended\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/threads/{{threadId}}/messages",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"threads",
								"{{threadId}}",
								"messages"
							]
						},
						"description": "Adds a message to an existing conversation (thread) with a BookRecommendationAgent. Use this endpoint when you have both agentId and threadId to continue an existing conversation. The conversation context will be maintained, and you'll receive structured book recommendations in the response.\n\nRequest body:\n- agentId (required): The ID of the BookRecommendationAgent to use\n- message (required): The follow-up message\n\nPath parameter:\n- threadId (required): The ID of the existing thread/conversation"
					},
					"response": [
						{
							"name": "Success Response with Follow-up Recommendations",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"agentId\": \"{{agentId}}\",\n  \"message\": \"Tell me more about the first book you recommended\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/api/threads/{{threadId}}/messages",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"threads",
										"{{threadId}}",
										"messages"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"agentId\": \"asst_xyz789\",\n  \"threadId\": \"thread_abc123\",\n  \"createdAt\": \"2025-01-13T14:05:00Z\",\n  \"messages\": [\n    {\n      \"authorName\": \"asst_xyz789\",\n      \"createdAt\": \"2025-01-13T14:05:00Z\",\n      \"role\": \"Assistant\",\n      \"messageId\": \"run_def456\",\n      \"structuredOutput\": \"{\\\"recommendations\\\":[{\\\"title\\\":\\\"Dune\\\",\\\"author\\\":\\\"Frank Herbert\\\",\\\"genre\\\":\\\"Science Fiction\\\",\\\"description\\\":\\\"Dune is set on the desert planet Arrakis, the only source of the spice melange, the most important substance in the universe. It follows Paul Atreides as his family takes control of Arrakis and he becomes involved in a complex political and religious conflict.\\\",\\\"rating\\\":4.8,\\\"publicationDate\\\":\\\"1965-08-01\\\",\\\"isbn\\\":\\\"978-0441013593\\\",\\\"pageCount\\\":688,\\\"whyRecommended\\\":\\\"Dune is considered one of the greatest science fiction novels of all time, winning both the Hugo Award and Nebula Award. It's a rich, complex story with deep world-building.\\\",\\\"similarBooks\\\":[\\\"Dune Messiah\\\",\\\"Children of Dune\\\",\\\"Foundation\\\",\\\"The Left Hand of Darkness\\\"]}],\\\"totalCount\\\":1,\\\"notes\\\":\\\"Detailed information about Dune, the first book recommended in our previous conversation.\\\"}\"\n    }\n  ],\n  \"usage\": {\n    \"inputTokenCount\": 35,\n    \"outputTokenCount\": 420,\n    \"totalTokenCount\": 455\n  }\n}"
						}
					]
				},
				{
					"name": "Request Mystery Books",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"agentId\": \"{{agentId}}\",\n  \"message\": \"I'm looking for mystery novels with strong female protagonists\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/threads",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"threads"
							]
						},
						"description": "Example request for mystery books with specific criteria. This demonstrates how to request book recommendations with specific requirements."
					},
					"response": []
				},
				{
					"name": "Request Fantasy Books from 2023",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"agentId\": \"{{agentId}}\",\n  \"message\": \"What are the best fantasy books published in 2023?\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/threads",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"threads"
							]
						},
						"description": "Example request for recent fantasy books. This shows how to request books by genre and publication year."
					},
					"response": []
				}
			],
			"description": "Endpoints for managing threads (conversations) and messages with structured book recommendations. POST /api/threads creates a new thread and sends the first message (agentId in body). POST /api/threads/{threadId}/messages adds a message to an existing thread (agentId in body). All responses return StructuredAgentResponse<BookRecommendationResponse> with structuredOutput as a JSON string in the messages."
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:5297",
			"type": "string",
			"description": "Base URL for the API. Default is http://localhost:5297 (matches launchSettings.json)"
		},
		{
			"key": "agentId",
			"value": "asst_abc123",
			"type": "string",
			"description": "Agent ID for testing agent operations. Get this from the Create Agent endpoint response."
		},
		{
			"key": "threadId",
			"value": "thread_abc123",
			"type": "string",
			"description": "Thread ID (conversation ID) for testing conversation operations. Get this from the Create Thread endpoint response."
		}
	]
}

