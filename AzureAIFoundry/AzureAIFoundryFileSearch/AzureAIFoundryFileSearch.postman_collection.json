{
	"info": {
		"_postman_id": "azure-ai-foundry-file-search",
		"name": "Azure AI Foundry File Search",
		"description": "Postman collection for testing Azure AI Foundry File Search API. This collection includes RESTful endpoints for managing agents, threads (conversations), vector stores, and datasets. The API follows REST principles with clear separation between agent creation and thread management.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Agents",
			"item": [
				{
					"name": "Create Agent",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"agentType\": null\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/agents",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"agents"
							]
						},
						"description": "Creates a new agent. Use this endpoint to create an agent before starting conversations. The response will include the agentId.\n\nRequest body:\n- agentType (optional): The type of agent to create. If not provided, defaults to ProductSearchAgent. Example: {\"agentType\": \"ProductSearchAgent\"}"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"agentType\": null\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/api/agents",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"agents"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"agentId\": \"asst_xyz789\"\n}"
						}
					]
				}
			],
			"description": "Endpoints for managing agents. Use POST /api/agents to create a new agent."
		},
		{
			"name": "Threads",
			"item": [
				{
					"name": "Create Thread and Send Message",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"agentId\": \"{{agentId}}\",\n  \"message\": \"What products do you have?\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/threads",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"threads"
							]
						},
						"description": "Creates a new conversation (thread) for an agent and sends the first message. Use this endpoint when you have an agentId and want to start a new conversation. The response will include the threadId for future messages.\n\nRequest body:\n- agentId (required): The ID of the agent to use\n- message (required): The message to send"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"agentId\": \"{{agentId}}\",\n  \"message\": \"What products do you have?\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/api/threads",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"threads"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"agentId\": \"asst_xyz789\",\n  \"threadId\": \"thread_abc123\",\n  \"createdAt\": \"2025-11-13T14:00:00Z\",\n  \"messages\": [\n    {\n      \"authorName\": \"asst_xyz789\",\n      \"createdAt\": \"2025-11-13T14:00:00Z\",\n      \"role\": \"Assistant\",\n      \"messageId\": \"run_abc123\",\n      \"content\": \"We have various products available...\"\n    }\n  ],\n  \"usage\": {\n    \"inputTokenCount\": 56,\n    \"outputTokenCount\": 120,\n    \"totalTokenCount\": 176\n  }\n}"
						}
					]
				},
				{
					"name": "Add Message to Thread",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"agentId\": \"{{agentId}}\",\n  \"message\": \"What is the price of that product?\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/threads/{{threadId}}/messages",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"threads",
								"{{threadId}}",
								"messages"
							]
						},
						"description": "Adds a message to an existing conversation (thread). Use this endpoint when you have both agentId and threadId to continue an existing conversation. The conversation context will be maintained.\n\nRequest body:\n- agentId (required): The ID of the agent to use\n- message (required): The message to send"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"agentId\": \"{{agentId}}\",\n  \"message\": \"What is the price of that product?\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/api/threads/{{threadId}}/messages",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"threads",
										"{{threadId}}",
										"messages"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"agentId\": \"asst_xyz789\",\n  \"threadId\": \"thread_abc123\",\n  \"createdAt\": \"2025-11-13T14:00:00Z\",\n  \"messages\": [\n    {\n      \"authorName\": \"asst_xyz789\",\n      \"createdAt\": \"2025-11-13T14:00:00Z\",\n      \"role\": \"Assistant\",\n      \"messageId\": \"run_def456\",\n      \"content\": \"The price of that product is $29.99.\"\n    }\n  ],\n  \"usage\": {\n    \"inputTokenCount\": 45,\n    \"outputTokenCount\": 15,\n    \"totalTokenCount\": 60\n  }\n}"
						}
					]
				}
			],
			"description": "Endpoints for managing threads (conversations) and messages. POST /api/threads creates a new thread and sends the first message (agentId in body). POST /api/threads/{threadId}/messages adds a message to an existing thread (agentId in body)."
		},
		{
			"name": "Vector Store",
			"item": [
				{
					"name": "Get Vector Store",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/vectorstores/{{vectorStoreId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"vectorstores",
								"{{vectorStoreId}}"
							]
						},
						"description": "Gets a vector store by ID."
					},
					"response": []
				},
				{
					"name": "Create Vector Store",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"my_vector_store\",\n  \"description\": \"A vector store for my data\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/vectorstores",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"vectorstores"
							]
						},
						"description": "Creates a new vector store."
					},
					"response": []
				},
				{
					"name": "Get Vector Store Files",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/vectorstores/{{vectorStoreId}}/files",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"vectorstores",
								"{{vectorStoreId}}",
								"files"
							]
						},
						"description": "Gets all files from a vector store."
					},
					"response": []
				},
				{
					"name": "Add File to Vector Store",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"fileId\": \"file_abc123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/vectorstores/{{vectorStoreId}}/files",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"vectorstores",
								"{{vectorStoreId}}",
								"files"
							]
						},
						"description": "Adds a file to a vector store."
					},
					"response": []
				},
				{
					"name": "Clean Vector Store",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"removeFilesFromDatasets\": false\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/vectorstores/{{vectorStoreId}}/clean",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"vectorstores",
								"{{vectorStoreId}}",
								"clean"
							]
						},
						"description": "Cleans a vector store by removing all files. Set removeFilesFromDatasets to true to also delete files from Datasets."
					},
					"response": []
				}
			],
			"description": "Vector store management endpoints for file search functionality. Use the Enabled flag in appsettings.json to control which stores are processed."
		},
		{
			"name": "Datasets",
			"item": [
				{
					"name": "List Files",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/datasets",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"datasets"
							]
						},
						"description": "Lists all files in the Datasets."
					},
					"response": []
				},
				{
					"name": "Get File",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/datasets/{{fileId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"datasets",
								"{{fileId}}"
							]
						},
						"description": "Gets a file by ID."
					},
					"response": []
				},
				{
					"name": "Upload File",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"filePath\": \"products.json\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/datasets/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"datasets",
								"upload"
							]
						},
						"description": "Uploads a file to Datasets. The filePath should be relative to the Files folder (e.g., 'products.json' will resolve to 'Files/products.json')."
					},
					"response": []
				},
				{
					"name": "Delete File",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/datasets/{{fileId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"datasets",
								"{{fileId}}"
							]
						},
						"description": "Deletes a file from Datasets."
					},
					"response": []
				}
			],
			"description": "Dataset (file) management endpoints for managing files in Azure AI Foundry file storage."
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:5181",
			"type": "string",
			"description": "Base URL for the API. Default is http://localhost:5181"
		},
		{
			"key": "vectorStoreId",
			"value": "vs_abc123",
			"type": "string",
			"description": "Vector store ID for testing vector store operations"
		},
		{
			"key": "fileId",
			"value": "file_abc123",
			"type": "string",
			"description": "File ID for testing file operations"
		},
		{
			"key": "agentId",
			"value": "asst_abc123",
			"type": "string",
			"description": "Agent ID for testing agent operations"
		},
		{
			"key": "threadId",
			"value": "thread_abc123",
			"type": "string",
			"description": "Thread ID (conversation ID) for testing conversation operations"
		}
	]
}

